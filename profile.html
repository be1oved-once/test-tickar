<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Profile</title>
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Beforexam",
    "url": "https://beforexam.vercel.app"
  }
</script>

<!-- Organization Schema -->
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "Beforexam",
    "url": "https://beforexam.vercel.app",
    "logo": "https://beforexam.vercel.app/assets/favicon/android-chrome-512x512.png"
  }
</script>
<link rel="stylesheet" href="assets/css/common.css">
<link rel="stylesheet" href="/assets/css/profile.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">

<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <!-- FAVICONS -->
<link rel="icon" type="image/png" sizes="16x16" href="assets/favicon/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="assets/favicon/favicon-32x32.png">
<link rel="icon" href="assets/favicon/favicon.ico">

<link rel="apple-touch-icon" sizes="180x180" href="assets/favicon/apple-touch-icon.png">

<link rel="icon" type="image/png" sizes="192x192" href="assets/favicon/android-chrome-192x192.png">
<link rel="icon" type="image/png" sizes="512x512" href="assets/favicon/android-chrome-512x512.png">

<link rel="manifest" href="assets/favicon/site.webmanifest">

<meta name="theme-color" content="#6c63ff">
</head>

<body>
<main class="profile-content">

  <!-- ===== PROFILE SKELETON (VISIBLE FIRST) ===== -->
  <div id="profileSkeleton">

    <!-- Header skeleton -->
    <div class="pr-skel-header"></div>

    <!-- Card skeleton -->
    <div class="pr-skel-card">

      <div class="pr-skel-title"></div>

      <div class="pr-skel-field"></div>
      <div class="pr-skel-field"></div>
      <div class="pr-skel-field"></div>

      <div class="pr-skel-btn"></div>
    </div>

  </div>


  <!-- ===== REAL PROFILE CONTENT (HIDDEN FIRST) ===== -->
  <div id="profileContent" style="display:none;">

    <!-- HEADER -->
    <div class="perform-header">
      <h2>My Profile</h2>

      <div class="header-actions">
        <button id="editProfile" class="edit-inline-btn"><svg class="icon-pencil" viewBox="0 0 24 24" fill="none"
     stroke="currentColor" stroke-width="1.6"
     stroke-linecap="round" stroke-linejoin="round">
  <path d="M12 20h9"/>
  <path d="M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4Z"/>
</svg>Edit
        </button>

        <button class="edit-inline-btn" onclick="history.back()">
          <i class="fa-solid fa-arrow-left"></i>Back
        </button>
      </div>
    </div>

    <div class="profile-card">

      <h3 class="profile-title">Profile Details</h3>

      <!-- Username -->
      <div class="field">
        <label>Username</label>
        <input type="text" id="username">
      </div>

      <!-- DOB -->
      <div class="field dob-field">
        <label>Date of Birth</label>
        <input type="date" id="dob">
        <small class="hint">You must be at least 17 years old</small>
      </div>

      <!-- Gender -->
      <div class="field">
        <label>Gender</label>

        <button id="genderBtn" class="select-btn">
          <span id="genderText">Select Gender</span>
        </button>

        <div id="genderPopup" class="select-popup">
          <button data-val="Male">Male</button>
          <button data-val="Female">Female</button>
          <button data-val="Other">Other</button>
          <button data-val="Prefer not to say">Prefer not to say</button>
        </div>
      </div>

      <!-- Save -->
      <button id="saveProfile" class="save-btn">
        Save Profile
      </button>

      <p id="profileMsg" class="msg"></p>

    </div>

  </div>

</main>
<script type="module">
import { auth } from "./assets/js/firebase.js";

auth.onAuthStateChanged(user => {
  if (!user) return;

  // Block back navigation if profile incomplete
  window.addEventListener("beforeunload", e => {
    e.preventDefault();
    e.returnValue = "";
  });
});
</script>
  <script src="assets/js/common-layout.js"></script>
  <script type="module" src="assets/js/profile.js"></script>
<script type="module" src="assets/js/firebase.js"></script>
<script type="module" src="assets/js/user-metrics-init.js"></script>
<script type="module" src="assets/js/common.js"></script>
</body>
</html>